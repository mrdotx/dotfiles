<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>
    <!--
    This adds a generic family 'emoji',
    aimed for apps that don't specify specific font family for rendering emojis.
    -->
    <match target="pattern">
        <test qual="any" name="family"><string>emoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <!--
    This adds JoyPixels as a final fallback font for the default font families.
    In this case, JoyPixels will be selected if and only if no other font can provide a given symbol.
    Note that usually other fonts will have some glyphs available (e.g. Symbola or DejaVu fonts),
    causing some emojis to be rendered in black-and-white.
    -->
    <match target="pattern">
        <test name="family"><string>sans</string></test>
        <edit name="family" mode="append"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test name="family"><string>serif</string></test>
        <edit name="family" mode="append"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test name="family"><string>sans-serif</string></test>
        <edit name="family" mode="append"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test name="family"><string>monospace</string></test>
        <edit name="family" mode="append"><string>JoyPixels</string></edit>
    </match>

    <!--
    If other fonts contain emoji glyphs, they could interfere and make some emojis rendered in wrong font (often in black-and-white).
    For example, DejaVu Sans contains black-and-white emojis, which we can remove using the following trick:
    -->
    <match target="scan">
        <test name="family" compare="contains">
            <string>DejaVu</string>
        </test>
        <edit name="charset" mode="assign" binding="same">
            <minus>
                <name>charset</name>
                <charset>
                    <int>0x203c</int>
                    <int>0x2049</int>
                    <int>0x2139</int>
                    <int>0x21a9</int>
                    <int>0x21aa</int>
                    <int>0x2328</int>
                    <int>0x23cf</int>
                    <int>0x25ab</int>
                    <int>0x25b6</int>
                    <int>0x25c0</int>
                    <int>0x25fb</int>
                    <int>0x25fd</int>
                    <range>
                        <int>0x2600</int>
                        <int>0x2604</int>
                    </range>
                    <int>0x260e</int>
                    <int>0x2611</int>
                    <int>0x2614</int>
                    <int>0x2618</int>
                    <int>0x261d</int>
                    <int>0x2620</int>
                    <int>0x2622</int>
                    <int>0x2623</int>
                    <int>0x2626</int>
                    <int>0x262a</int>
                    <int>0x262e</int>
                    <int>0x262f</int>
                    <int>0x2638</int>
                    <int>0x2639</int>
                    <int>0x263a</int>
                    <int>0x2640</int>
                    <int>0x2642</int>
                    <range>
                        <int>0x2648</int>
                        <int>0x2653</int>
                    </range>
                    <int>0x265f</int>
                    <int>0x2660</int>
                    <int>0x2663</int>
                    <!-- <int>0x2665</int> -->
                    <int>0x2666</int>
                    <int>0x2668</int>
                    <int>0x267b</int>
                    <int>0x267e</int>
                    <int>0x267f</int>
                    <int>0x2692</int>
                    <int>0x2693</int>
                    <int>0x2695</int>
                    <int>0x2696</int>
                    <int>0x2699</int>
                    <int>0x269b</int>
                    <int>0x269c</int>
                    <int>0x26a0</int>
                    <!-- <int>0x26a1</int> -->
                    <int>0x26a7</int>
                    <int>0x26aa</int>
                    <int>0x26b0</int>
                    <int>0x26b1</int>
                    <int>0x2702</int>
                    <int>0x2708</int>
                    <int>0x2709</int>
                    <int>0x270c</int>
                    <int>0x270d</int>
                    <int>0x270f</int>
                    <int>0x2712</int>
                    <int>0x2714</int>
                    <int>0x2716</int>
                    <int>0x271d</int>
                    <int>0x2721</int>
                    <int>0x2733</int>
                    <int>0x2734</int>
                    <int>0x2744</int>
                    <int>0x2747</int>
                    <int>0x2763</int>
                    <int>0x2764</int>
                    <int>0x1f0cf</int>
                    <range>
                        <int>0x1f311</int>
                        <int>0x1f318</int>
                    </range>
                    <int>0x1f374</int>
                    <int>0x1f42d</int>
                    <int>0x1f42e</int>
                    <int>0x1f431</int>
                    <range>
                        <int>0x1f600</int>
                        <int>0x1f623</int>
                    </range>
                    <range>
                        <int>0x1f625</int>
                        <int>0x1f62b</int>
                    </range>
                    <range>
                        <int>0x1f62d</int>
                        <int>0x1f640</int>
                    </range>
                    <int>0x1f643</int>
                </charset>
            </minus>
        </edit>
    </match>

    <!--
    Block Symbola from the list of fallback fonts.
    -->
    <selectfont>
        <rejectfont>
            <pattern>
                <patelt name="family">
                    <string>Symbola</string>
                </patelt>
            </pattern>
        </rejectfont>
    </selectfont>

    <!--
    Recognize legacy ways of writing JoyPixels family name.
    -->
    <match target="pattern">
        <test qual="any" name="family"><string>EmojiOne</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Emoji One</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>EmojiOne Color</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>EmojiOne Mozilla</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <!--
    Use JoyPixels when other popular fonts are being specifically requested.
    It is quite common that websites would only request Apple and Google emoji fonts.
    These aliases will make JoyPixels be selected in such cases to provide good-looking emojis.
    This obviously conflicts with other emoji fonts if you have them installed.
    -->
    <match target="pattern">
        <test qual="any" name="family"><string>Noto Color Emoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>NotoColorEmoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Noto Emoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Apple Color Emoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Segoe UI Emoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Segoe UI Symbol</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Android Emoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Twitter Color Emoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Twemoji</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Twemoji Mozilla</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>TwemojiMozilla</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>EmojiTwo</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Emoji Two</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>EmojiSymbols</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>

    <match target="pattern">
        <test qual="any" name="family"><string>Symbola</string></test>
        <edit name="family" mode="assign" binding="same"><string>JoyPixels</string></edit>
    </match>
</fontconfig>
